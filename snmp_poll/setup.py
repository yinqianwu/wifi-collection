import subprocess
import os

#

mibsDir = os.path.abspath('../mibs/wlc83/')

pythonMibsDir = os.path.join(os.path.expanduser("~"), '.pysnmp' , 'mibs')

mibDumpFile = '/usr/local/bin/mibdump.py'


mibsList = [
'SNMPv2-SMI',
'SNMPv2-TC',
'CISCO-SMI',
'SNMPv2-CONF',
'SNMP-FRAMEWORK-MIB',
'INET-ADDRESS-MIB',
'CISCO-LWAPP-TC-MIB',
'CISCO-LWAPP-WLAN-MIB',
'ENTITY-MIB',
'CISCO-LWAPP-DOT11-MIB',
'CISCO-TC',
'CISCO-LWAPP-RF-MIB',
'IANAifType-MIB',
'CISCO-LWAPP-AP-MIB',
'CISCO-LWAPP-MOBILITY-EXT-MIB',
'Q-BRIDGE-MIB',
'AIRESPACE-REF-MIB',
'CISCO-ST-TC',
'SNMPv2-MIB',
'CISCO-LWAPP-DOT11-CLIENT-MIB',
'IF-MIB',
'CISCO-TRUSTSEC-TC-MIB',
'AIRESPACE-WIRELESS-MIB',
'CISCO-CONFIG-COPY-MIB',
'CISCO-LWAPP-MESH-MIB',
'CISCO-LWAPP-ACL-MIB',
'RFC1213-MIB',
'CISCO-RF-MIB',
'CISCO-LWAPP-SYS-MIB',
'CISCO-LWAPP-DOT11-CLIENT-CCX-TC-MIB',
'CISCO-VTP-MIB',
'CISCO-TRUSTSEC-SXP-MIB',
'CISCO-SYSTEM-EXT-MIB',
'CISCO-SNMP-HANDSHAKE-MIB',
'CISCO-RF-SUPPLEMENTAL-MIB',
'CISCO-LWAPP-WLAN-SECURITY-MIB',
'CISCO-LWAPP-WEBAUTH-MIB',
'CISCO-LWAPP-WEBAUTH-CAPABILITY',
'CISCO-LWAPP-WAPI-MIB',
'CISCO-LWAPP-TUNNEL-MIB',
'CISCO-LWAPP-TSM-MIB',
'CISCO-LWAPP-TSM-CAPABILITY',
'CISCO-LWAPP-SYS-CAPABILITY',
'CISCO-LWAPP-SI-MIB',
'CISCO-LWAPP-RRM-MIB',
'CISCO-LWAPP-ROGUE-MIB',
'CISCO-LWAPP-RF-CAPABILITY',
'CISCO-LWAPP-REAP-MIB',
'CISCO-LWAPP-QOS-MIB',
'CISCO-LWAPP-QOS-CAPABILITY',
'CISCO-LWAPP-PMIP-MIB',
'CISCO-LWAPP-NETFLOW-MIB',
'CISCO-LWAPP-NBAR-MIB',
'CISCO-LWAPP-MOBILITY-MIB',
'CISCO-LWAPP-MFP-MIB',
'CISCO-LWAPP-MFP-CAPABILITY',
'CISCO-LWAPP-MESH-STATS-MIB',
'CISCO-LWAPP-MESH-LINKTEST-MIB',
'CISCO-LWAPP-MESH-BATTERY-MIB',
'CISCO-LWAPP-MDNS-MIB',
'CISCO-LWAPP-LOCAL-AUTH-MIB',
'CISCO-LWAPP-LINKTEST-MIB',
'CISCO-LWAPP-IPV6-MIB',
'CISCO-LWAPP-INTERFACE-MIB',
'CISCO-LWAPP-IDS-MIB',
'CISCO-LWAPP-HA-MIB',
'CISCO-LWAPP-EXT-MIB',
'CISCO-LWAPP-DOWNLOAD-MIB',
'CISCO-LWAPP-DOT11-LDAP-MIB',
'CISCO-LWAPP-DOT11-CLIENT-TS-MIB',
'CISCO-LWAPP-DOT11-CLIENT-CCXV5-REPORTING-MIB',
'CISCO-LWAPP-DOT11-CLIENT-CCX-REPORTS-MIB',
'CISCO-LWAPP-DOT11-CLIENT-CALIB-MIB',
'CISCO-LWAPP-DOT11-CLIENT-CALIB-CAPABILITY',
'CISCO-LWAPP-DOT11-CCX-CLIENT-MIB',
'CISCO-LWAPP-DOT11-CCX-CLIENT-DIAG-MIB',
'CISCO-LWAPP-DHCP-MIB',
'CISCO-LWAPP-CLOUD-SERVICES-MIB',
'CISCO-LWAPP-CLIENT-ROAMING-MIB',
'CISCO-LWAPP-CLIENT-ROAMING-CAPABILITY',
'CISCO-LWAPP-CDP-MIB',
'CISCO-LWAPP-CCX-RM-MIB',
'CISCO-LWAPP-AAA-MIB',
'CISCO-LICENSE-MGMT-MIB',
'CISCO-ENVMON-MIB',
'CISCO-ENVMON-CAPABILITY',
'CISCO-CDP-MIB',
'AIRESPACE-SWITCHING-MIB',
'AIRESPACE-WIRELESS-MIB'
]

filesList = ''

for m in mibsList:
    mPath = os.path.join(mibsDir, m +'.my')
    print mPath
    assert (os.path.isfile(mPath))
    filesList+=' '+ mPath


cmd = 'python {0} --generate-mib-texts --rebuild  --mib-source={2}  --debug=borrower,reader --build-index {1}'.format(mibDumpFile, filesList, mibsDir)


subprocess.check_call(cmd, shell = True)




